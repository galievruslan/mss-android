package com.mss.android.infrastructure.ormlite;

import com.j256.ormlite.dao.Dao;
import com.j256.ormlite.support.ConnectionSource;
import com.mss.android.infrastructure.data.IEntity;
import com.mss.android.infrastructure.data.IRepository;

public abstract class OrmliteGenericRepository<TEntity extends IEntity> implements IRepository<TEntity> {

	private Dao<TEntity, Integer> dao = null;
	protected OrmliteGenericRepository(Dao<TEntity, Integer> dao) throws Throwable{
		this.dao = dao;
	}
	
	protected abstract Dao<TEntity, Integer> initializeDao(ConnectionSource connectionSource) throws Throwable;
	
	@Override
	public TEntity getById(int id) throws Throwable {
		return dao.queryForId(id);
	}

	@Override
	public Iterable<TEntity> find() throws Throwable {
		return dao.queryForAll();
	}

	@Override
	public void save(TEntity entity) throws Throwable {
		dao.createOrUpdate(entity);		
	}

	@Override
	public void delete(TEntity entity) throws Throwable {
		dao.delete(entity);
		
	}

}
