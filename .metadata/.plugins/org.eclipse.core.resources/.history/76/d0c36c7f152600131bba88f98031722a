package com.mss.infrastructure.ormlite;

import java.util.ArrayList;

import com.j256.ormlite.stmt.QueryBuilder;
import com.mss.domain.models.Customer;

public class OrmliteCustomerRepository extends OrmliteGenericRepository<Customer> {

	public OrmliteCustomerRepository(DatabaseHelper databaseHelper) throws Throwable{
		super(databaseHelper.getCustomerDao());
	}
	
	public Iterable<Customer> find(String searchCriteria) throws Throwable {
		ArrayList<Customer> filtredCustomers = new ArrayList<Customer>();
		Iterable<Customer> customers = find();
		for (Customer customer : customers) {
			if (customer.getName().contains(searchCriteria) || 
				customer.getAddress().contains(searchCriteria))
				filtredCustomers.add(customer);
		}
		
		return filtredCustomers;
	}
}
