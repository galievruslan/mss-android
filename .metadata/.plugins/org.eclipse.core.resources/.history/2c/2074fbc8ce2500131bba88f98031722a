package com.mss.infrastructure.ormlite;

import android.text.TextUtils;

import com.j256.ormlite.stmt.QueryBuilder;
import com.mss.domain.models.Customer;

public class OrmliteCustomerRepository extends OrmliteGenericRepository<Customer> {

	public OrmliteCustomerRepository(DatabaseHelper databaseHelper) throws Throwable{
		super(databaseHelper.getCustomerDao());
	}
	
	public Iterable<Customer> find(String searchCriteria) throws Throwable {
		QueryBuilder<Customer, Integer> queryBuilder = dao.queryBuilder();
		
		queryBuilder.where()
			.raw("UPPER("+ com.mss.domain.models.Constants.Tables.Customer.NAME_FIELD + ") like " + '%' + searchCriteria.toUpperCase() + '%')
			.or()
			.raw("UPPER("+ com.mss.domain.models.Constants.Tables.Customer.ADDRESS_FIELD + ") like " + '%' + searchCriteria.toUpperCase() + '%');
		return dao.query(queryBuilder.prepare());
	}
}
