package com.mss.infrastructure.ormlite;

import com.j256.ormlite.dao.Dao;
import com.j256.ormlite.stmt.QueryBuilder;
import com.mss.domain.models.Customer;
import com.mss.domain.models.ShippingAddress;

public class OrmliteCustomerRepository extends OrmliteGenericRepository<Customer> {

	Dao<ShippingAddress, Integer> shippingAddressDao;
	public OrmliteCustomerRepository(DatabaseHelper databaseHelper) throws Throwable{
		super(databaseHelper.getCustomerDao());
		
		shippingAddressDao = databaseHelper.getShippingAddressDao();
	}
	
	public Iterable<ShippingAddress> findByShippingAddressId(long id) throws Throwable {
		
		QueryBuilder<ShippingAddress, Integer> queryBuilder = shippingAddressDao.queryBuilder();		
		queryBuilder.where().eq(com.mss.domain.models.Constants.Tables.ShippingAddress.CUSTOMER_FIELD ,id);
		return shippingAddressDao.query(queryBuilder.prepare());
	}
}
